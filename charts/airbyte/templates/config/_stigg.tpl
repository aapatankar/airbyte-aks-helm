
{{/* DO NOT EDIT: This file was autogenerated. */}}

{{/*
    Stigg Configuration
*/}}

{{/*
Renders the stigg secret name
*/}}
{{- define "airbyte.stigg.secretName" }}
{{- if .Values.global.stigg.secretName }}
    {{- .Values.global.stigg.secretName }}
{{- else }}
    {{- .Values.global.secretName | default (printf "%s-airbyte-secrets" .Release.Name) }}
{{- end }}
{{- end }}

{{/*
Renders the global.stigg.enabled value
*/}}
{{- define "airbyte.stigg.enabled" }}
    {{- .Values.stiggSidecar.enabled }}
{{- end }}

{{/*
Renders the stigg.enabled environment variable
*/}}
{{- define "airbyte.stigg.enabled.env" }}
- name: STIGG_ENABLED
  valueFrom:
    configMapKeyRef:
      name: {{ .Release.Name }}-airbyte-env
      key: STIGG_ENABLED
{{- end }}

{{/*
Renders the global.stigg.apiKey value
*/}}
{{- define "airbyte.stigg.apiKey" }}
    {{- .Values.global.stigg.apiKey }}
{{- end }}

{{/*
Renders the stigg.apiKey secret key
*/}}
{{- define "airbyte.stigg.apiKey.secretKey" }}
	{{- .Values.global.stigg.apiKeySecretKey | default "STIGG_API_KEY" }}
{{- end }}

{{/*
Renders the stigg.apiKey environment variable
*/}}
{{- define "airbyte.stigg.apiKey.env" }}
- name: STIGG_API_KEY
  valueFrom:
    secretKeyRef:
      name: {{ include "airbyte.stigg.secretName" . }}
      key: {{ include "airbyte.stigg.apiKey.secretKey" . }}
{{- end }}

{{/*
Renders the global.stigg.host value
*/}}
{{- define "airbyte.stigg.host" }}
    {{- (printf "%s-stigg-sidecar-svc.%s" .Release.Name .Release.Namespace) }}
{{- end }}

{{/*
Renders the stigg.host environment variable
*/}}
{{- define "airbyte.stigg.host.env" }}
- name: STIGG_SIDECAR_HOST
  valueFrom:
    configMapKeyRef:
      name: {{ .Release.Name }}-airbyte-env
      key: STIGG_SIDECAR_HOST
{{- end }}

{{/*
Renders the global.stigg.port value
*/}}
{{- define "airbyte.stigg.port" }}
    {{- .Values.stiggSidecar.service.port }}
{{- end }}

{{/*
Renders the stigg.port environment variable
*/}}
{{- define "airbyte.stigg.port.env" }}
- name: STIGG_SIDECAR_PORT
  valueFrom:
    configMapKeyRef:
      name: {{ .Release.Name }}-airbyte-env
      key: STIGG_SIDECAR_PORT
{{- end }}

{{/*
Renders the set of all stigg environment variables
*/}}
{{- define "airbyte.stigg.envs" }}
{{- include "airbyte.stigg.enabled.env" . }}
{{- include "airbyte.stigg.apiKey.env" . }}
{{- if .Values.stiggSidecar.enabled }}
{{- include "airbyte.stigg.host.env" . }}
{{- end }}
{{- if .Values.stiggSidecar.enabled }}
{{- include "airbyte.stigg.port.env" . }}
{{- end }}
{{- end }}

{{/*
Renders the set of all stigg config map variables
*/}}
{{- define "airbyte.stigg.configVars" }}
STIGG_ENABLED: {{ include "airbyte.stigg.enabled" . | quote }}
{{- if .Values.stiggSidecar.enabled }}
STIGG_SIDECAR_HOST: {{ include "airbyte.stigg.host" . | quote }}
{{- end }}
{{- if .Values.stiggSidecar.enabled }}
STIGG_SIDECAR_PORT: {{ include "airbyte.stigg.port" . | quote }}
{{- end }}
{{- end }}

{{/*
Renders the set of all stigg secret variables
*/}}
{{- define "airbyte.stigg.secrets" }}
STIGG_API_KEY: {{ include "airbyte.stigg.apiKey" . | quote }}
{{- end }}
